@model GauMeo.Models.Categories.Category
@{
    ViewData["Title"] = $"Chi ti·∫øt danh m·ª•c: {Model.Name}";
    Layout = "~/Areas/Admin/Views/Shared/_AdminLayout.cshtml";
}

<div class="main-content">
    <div class="admin-card">
        <div class="card-header-admin">
            <div class="header-left">
                <h4 class="card-title">
                    <i class='bx bx-show'></i>
                    Chi ti·∫øt danh m·ª•c: @Model.Name
                </h4>
                <p class="card-subtitle">Th√¥ng tin chi ti·∫øt v·ªÅ danh m·ª•c</p>
            </div>
            <div class="header-actions">
                <a href="@Url.Action("Edit", new { id = Model.Id })" class="btn-admin btn-warning">
                    <i class='bx bx-edit'></i>
                    Ch·ªânh s·ª≠a
                </a>
                <a href="@Url.Action("Delete", new { id = Model.Id })" class="btn-admin btn-danger">
                    <i class='bx bx-trash'></i>
                    X√≥a
                </a>
                <a href="@Url.Action("Index")" class="btn-admin btn-secondary">
                    <i class='bx bx-arrow-back'></i>
                    Quay l·∫°i
                </a>
            </div>
        </div>

        <div class="details-content">
            <div class="details-grid">
                <!-- Th√¥ng tin c∆° b·∫£n -->
                <div class="details-section">
                    <h5 class="section-title">
                        <i class='bx bx-info-circle'></i>
                        Th√¥ng tin c∆° b·∫£n
                    </h5>

                    <div class="info-grid">
                        <div class="info-item">
                            <label>T√™n danh m·ª•c:</label>
                            <span class="info-value highlight">@Model.Name</span>
                        </div>
                        <div class="info-item">
                            <label>Slug:</label>
                            <span class="info-value code">@Model.Slug</span>
                        </div>
                        <div class="info-item">
                            <label>M√¥ t·∫£:</label>
                            <span class="info-value">@(string.IsNullOrEmpty(Model.Description) ? "Ch∆∞a c√≥ m√¥ t·∫£" : Model.Description)</span>
                        </div>
                        <div class="info-item">
                            <label>Icon:</label>
                            <span class="info-value icon-display">
                                @if (!string.IsNullOrEmpty(Model.Icon))
                                {
                                    <span class="emoji-icon">@Model.Icon</span>
                                }
                                else
                                {
                                    <span class="no-icon">Ch∆∞a c√≥ icon</span>
                                }
                            </span>
                        </div>
                    </div>
                </div>

                <!-- C·∫•u tr√∫c ph√¢n c·∫•p -->
                <div class="details-section">
                    <h5 class="section-title">
                        <i class='bx bx-sitemap'></i>
                        C·∫•u tr√∫c ph√¢n c·∫•p
                    </h5>

                    <div class="info-grid">
                        <div class="info-item">
                            <label>C·∫•p ƒë·ªô:</label>
                            <span class="info-value level-badge level-@Model.Level">
                                C·∫•p @Model.Level 
                                @if (Model.Level == 1)
                                {
                                    <small>(Danh m·ª•c ch√≠nh)</small>
                                }
                                else if (Model.Level == 2)
                                {
                                    <small>(Danh m·ª•c cha)</small>
                                }
                                else if (Model.Level == 3)
                                {
                                    <small>(Danh m·ª•c con)</small>
                                }
                            </span>
                        </div>

                        @if (Model.Level == 1 && !string.IsNullOrEmpty(Model.AnimalType))
                        {
                            <div class="info-item">
                                <label>Lo·∫°i th√∫ c∆∞ng:</label>
                                <span class="info-value animal-type">
                                    @if (Model.AnimalType == "dog")
                                    {
                                        <span class="badge badge-dog">üêï Ch√≥</span>
                                    }
                                    else if (Model.AnimalType == "cat")
                                    {
                                        <span class="badge badge-cat">üê± M√®o</span>
                                    }
                                    else if (Model.AnimalType == "both")
                                    {
                                        <span class="badge badge-both">üêïüê± C·∫£ hai</span>
                                    }
                                </span>
                            </div>
                        }

                        @if (Model.ParentCategoryId.HasValue && Model.ParentCategory != null)
                        {
                            <div class="info-item">
                                <label>Danh m·ª•c cha:</label>
                                <span class="info-value">
                                    <a href="@Url.Action("Details", new { id = Model.ParentCategoryId })" class="parent-link">
                                        @Model.ParentCategory.Name
                                    </a>
                                </span>
                            </div>
                        }

                        <div class="info-item">
                            <label>Th·ª© t·ª± hi·ªÉn th·ªã:</label>
                            <span class="info-value">@Model.DisplayOrder</span>
                        </div>
                    </div>
                </div>

                <!-- H√¨nh ·∫£nh -->
                @if (!string.IsNullOrEmpty(Model.ImageUrl) || !string.IsNullOrEmpty(Model.IconUrl))
                {
                    <div class="details-section">
                        <h5 class="section-title">
                            <i class='bx bx-image'></i>
                            H√¨nh ·∫£nh
                        </h5>

                        <div class="image-gallery">
                            @if (!string.IsNullOrEmpty(Model.ImageUrl))
                            {
                                <div class="image-item">
                                    <label>H√¨nh ·∫£nh ch√≠nh:</label>
                                    <div class="image-preview">
                                        <img src="@Model.ImageUrl" alt="@Model.Name" />
                                    </div>
                                </div>
                            }

                            @if (!string.IsNullOrEmpty(Model.IconUrl))
                            {
                                <div class="image-item">
                                    <label>Icon:</label>
                                    <div class="icon-preview">
                                        <img src="@Model.IconUrl" alt="@Model.Name" />
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                }

                <!-- Tr·∫°ng th√°i -->
                <div class="details-section">
                    <h5 class="section-title">
                        <i class='bx bx-check-shield'></i>
                        Tr·∫°ng th√°i v√† hi·ªÉn th·ªã
                    </h5>

                    <div class="status-grid">
                        <div class="status-item">
                            <label>Tr·∫°ng th√°i:</label>
                            <span class="status-badge @(Model.IsActive ? "active" : "inactive")">
                                <i class='bx @(Model.IsActive ? "bx-check-circle" : "bx-pause-circle")'></i>
                                @(Model.IsActive ? "Ho·∫°t ƒë·ªông" : "Ng·ª´ng ho·∫°t ƒë·ªông")
                            </span>
                        </div>
                        <div class="status-item">
                            <label>Hi·ªÉn th·ªã trang ch·ªß:</label>
                            <span class="status-badge @(Model.IsShowOnHome ? "show" : "hide")">
                                <i class='bx @(Model.IsShowOnHome ? "bx-show" : "bx-hide")'></i>
                                @(Model.IsShowOnHome ? "C√≥" : "Kh√¥ng")
                            </span>
                        </div>
                    </div>
                </div>

                <!-- Th·ªëng k√™ -->
                @if (ViewBag.ChildCategories != null)
                {
                    var childCategories = (IEnumerable<GauMeo.Models.Categories.Category>)ViewBag.ChildCategories;
                    if (childCategories.Any())
                    {
                        <div class="details-section">
                            <h5 class="section-title">
                                <i class='bx bx-folder'></i>
                                Danh m·ª•c con (@childCategories.Count())
                            </h5>

                            <div class="child-categories">
                                @foreach (var child in childCategories)
                                {
                                    <div class="child-category-item">
                                        <div class="child-info">
                                            <span class="child-name">
                                                <a href="@Url.Action("Details", new { id = child.Id })">@child.Name</a>
                                            </span>
                                            <span class="child-level">C·∫•p @child.Level</span>
                                            <span class="child-status @(child.IsActive ? "active" : "inactive")">
                                                @(child.IsActive ? "Ho·∫°t ƒë·ªông" : "Ng·ª´ng")
                                            </span>
                                        </div>
                                        <div class="child-actions">
                                            <a href="@Url.Action("Edit", new { id = child.Id })" class="btn-sm btn-warning" title="Ch·ªânh s·ª≠a">
                                                <i class='bx bx-edit'></i>
                                            </a>
                                        </div>
                                    </div>
                                }
                            </div>
                        </div>
                    }
                }

                <!-- Th√¥ng tin h·ªá th·ªëng -->
                <div class="details-section">
                    <h5 class="section-title">
                        <i class='bx bx-time'></i>
                        Th√¥ng tin h·ªá th·ªëng
                    </h5>

                    <div class="info-grid">
                        <div class="info-item">
                            <label>ID:</label>
                            <span class="info-value code">@Model.Id</span>
                        </div>
                        <div class="info-item">
                            <label>Ng√†y t·∫°o:</label>
                            <span class="info-value">@Model.CreatedAt.ToString("dd/MM/yyyy HH:mm:ss")</span>
                        </div>
                        <div class="info-item">
                            <label>C·∫≠p nh·∫≠t l·∫ßn cu·ªëi:</label>
                            <span class="info-value">@Model.UpdatedAt.ToString("dd/MM/yyyy HH:mm:ss")</span>
                        </div>
                        <div class="info-item">
                            <label>URL trang s·∫£n ph·∫©m:</label>
                            <span class="info-value">
                                <a href="/Product/Category/@Model.Slug" target="_blank" class="external-link">
                                    /Product/Category/@Model.Slug
                                    <i class='bx bx-external-link'></i>
                                </a>
                            </span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="details-actions">
            <a href="@Url.Action("Edit", new { id = Model.Id })" class="btn-admin btn-warning">
                <i class='bx bx-edit'></i>
                Ch·ªânh s·ª≠a danh m·ª•c
            </a>
            <a href="@Url.Action("Create")" class="btn-admin btn-success">
                <i class='bx bx-plus'></i>
                Th√™m danh m·ª•c m·ªõi
            </a>
            <a href="@Url.Action("Index")" class="btn-admin btn-secondary">
                <i class='bx bx-list-ul'></i>
                Quay l·∫°i danh s√°ch
            </a>
        </div>
    </div>
</div>

<style>
    .details-content {
        padding: 20px 0;
    }

    .details-section {
        background: white;
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        border: 1px solid #e5e7eb;
    }

    .section-title {
        color: #374151;
        margin-bottom: 15px;
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 15px;
    }

    .info-item {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    .info-item label {
        font-weight: 600;
        color: #6b7280;
        font-size: 14px;
    }

    .info-value {
        color: #374151;
        font-size: 16px;
    }

    .info-value.highlight {
        font-weight: 600;
        color: #059669;
    }

    .info-value.code {
        font-family: 'Courier New', monospace;
        background: #f3f4f6;
        padding: 4px 8px;
        border-radius: 4px;
        font-size: 14px;
    }

    .level-badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 6px 12px;
        border-radius: 20px;
        font-weight: 600;
    }

    .level-1 { background: #dbeafe; color: #1e40af; }
    .level-2 { background: #dcfce7; color: #166534; }
    .level-3 { background: #fef3c7; color: #92400e; }

    .badge {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        padding: 4px 8px;
        border-radius: 12px;
        font-size: 14px;
        font-weight: 500;
    }

    .badge-dog { background: #dbeafe; color: #1e40af; }
    .badge-cat { background: #fce7f3; color: #be185d; }
    .badge-both { background: #f3e8ff; color: #7c3aed; }

    .emoji-icon {
        font-size: 24px;
    }

    .no-icon {
        color: #9ca3af;
        font-style: italic;
    }

    .status-grid {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .status-item {
        display: flex;
        flex-direction: column;
        gap: 5px;
    }

    .status-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 8px 12px;
        border-radius: 20px;
        font-weight: 600;
        font-size: 14px;
    }

    .status-badge.active { background: #dcfce7; color: #166534; }
    .status-badge.inactive { background: #fee2e2; color: #dc2626; }
    .status-badge.show { background: #dcfce7; color: #166534; }
    .status-badge.hide { background: #f3f4f6; color: #6b7280; }

    .image-gallery {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .image-item {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .image-preview img {
        max-width: 200px;
        max-height: 150px;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
    }

    .icon-preview img {
        max-width: 60px;
        max-height: 60px;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
    }

    .child-categories {
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .child-category-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 12px;
        background: #f9fafb;
        border-radius: 8px;
        border: 1px solid #e5e7eb;
    }

    .child-info {
        display: flex;
        align-items: center;
        gap: 15px;
    }

    .child-name a {
        font-weight: 600;
        color: #374151;
        text-decoration: none;
    }

    .child-name a:hover {
        color: #059669;
    }

    .child-level {
        font-size: 12px;
        padding: 2px 6px;
        background: #e5e7eb;
        border-radius: 10px;
        color: #6b7280;
    }

    .child-status {
        font-size: 12px;
        padding: 2px 8px;
        border-radius: 10px;
        font-weight: 500;
    }

    .parent-link {
        color: #059669;
        text-decoration: none;
        font-weight: 500;
    }

    .parent-link:hover {
        text-decoration: underline;
    }

    .external-link {
        color: #3b82f6;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 5px;
    }

    .external-link:hover {
        text-decoration: underline;
    }

    .details-actions {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
        padding: 20px 0;
        border-top: 1px solid #e5e7eb;
    }
</style> 