@model ForgotPasswordViewModel
@{
    Layout = "~/Views/Shared/_Layout.cshtml";
    ViewData["Title"] = "Quên mật khẩu";
}

@section Styles {
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="~/css/account.css" asp-append-version="true" />
    <style>
        .message {
            display: none;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            text-align: center;
        }
        #error-message {
            background-color: #ffe6e6;
            color: #ff0000;
        }
        #success-message {
            background-color: #e6ffe6;
            color: #008000;
        }
        #otpTimer {
            color: #666;
            font-size: 0.9em;
            margin-top: 5px;
        }
        #resendOtp {
            display: none;
            color: #4CAF50;
            text-decoration: underline;
            cursor: pointer;
            margin-top: 5px;
        }
    </style>
}

<div class="auth-container">
    <div class="container">
        <div class="form">
            <h2>Quên mật khẩu</h2>
            <div id="error-message" class="message"></div>
            <div id="success-message" class="message"></div>

                <!-- Slide 1: Nhập email -->
            <div class="slide active" id="slide1">
                <form id="sendOtpForm" asp-action="SendOtp" asp-controller="Account" method="post">
                    @Html.AntiForgeryToken()
                    <div class="inputBox">
                        <input type="email" id="Email" name="Email" required="required">
                        <i class="fa-regular fa-envelope"></i>
                        <span>Email</span>
                    </div>
                    <div class="inputBox">
                        <input type="submit" value="Gửi mã OTP" data-original-text="Gửi mã OTP">
                    </div>
                </form>
                </div>

                <!-- Slide 2: Nhập mã xác thực -->
            <div class="slide" id="slide2">
                <form id="verifyOtpForm">
                    @Html.AntiForgeryToken()
                    <div class="inputBox">
                        <input type="text" id="Otp" name="Otp" required="required">
                        <i class="fa-solid fa-key"></i>
                        <span>Nhập mã OTP</span>
                    </div>
                    <div id="otpTimer"></div>
                    <div id="resendOtp">Gửi lại mã OTP</div>
                    <div class="inputBox">
                        <input type="submit" value="Xác thực OTP" data-original-text="Xác thực OTP">
                    </div>
                    <div class="inputBox">
                        <input type="button" value="Quay lại" onclick="showSlide(1)">
                    </div>
                </form>
                </div>

            <!-- Slide 3: Nhập mật khẩu mới -->
            <div class="slide" id="slide3">
                <form id="resetPasswordForm">
                    @Html.AntiForgeryToken()
                    <div class="inputBox">
                        <input type="password" id="NewPassword" name="NewPassword" required="required">
                        <i class="fa-solid fa-lock"></i>
                        <span>Mật khẩu mới</span>
                    </div>
                    <div class="inputBox">
                        <input type="password" id="ConfirmPassword" name="ConfirmPassword" required="required">
                        <i class="fa-solid fa-lock"></i>
                        <span>Xác nhận mật khẩu</span>
                    </div>
                    <div class="inputBox">
                        <input type="submit" value="Đặt lại mật khẩu" data-original-text="Đặt lại mật khẩu">
                    </div>
                    <div class="inputBox">
                        <input type="button" value="Quay lại" onclick="showSlide(2)">
                    </div>
                </form>
                </div>

            <p>Nhớ mật khẩu? <a asp-action="Login" asp-controller="Account">Đăng nhập</a></p>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/forgot-password.js" asp-append-version="true"></script>
    <script>
        function showSlide(slideNumber) {
            document.querySelectorAll('.slide').forEach(slide => {
                slide.classList.remove('active');
            });
            document.getElementById('slide' + slideNumber).classList.add('active');
        }
    </script>
}