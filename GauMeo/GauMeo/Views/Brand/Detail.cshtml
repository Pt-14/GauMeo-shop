@{
    ViewData["Title"] = $"{ViewBag.Brand.Name} - GauMeo Petshop";
    var brand = ViewBag.Brand as dynamic;
    var products = ViewBag.Products as List<dynamic>;
    var categories = ViewBag.Categories as List<dynamic>;
    var priceRanges = ViewBag.PriceRanges as List<dynamic>;
}

@section Styles {
    <link rel="stylesheet" href="~/css/brand-detail.css" asp-append-version="true" />
}

<div class="brand-detail-container">
    <div class="breadcrumb">
        <a href="/Home/Index">Trang chủ</a> / 
        <a href="/Brand/Index">Thương hiệu</a> / 
        <span>@brand.Name</span>
    </div>
    
    <div class="brand-detail-header">
        <div class="brand-header-content">
            <div class="brand-logo-large">
                @if (!string.IsNullOrEmpty(brand.Image))
                {
                    <img src="@brand.Image" alt="@brand.Name" class="brand-logo-img-large">
                }
                else
                {
                    <div class="brand-logo-placeholder-large">@brand.ShortName</div>
                }
            </div>
            <div class="brand-header-info">
                <h1 class="brand-title">@brand.Name</h1>
                <p class="brand-subtitle">@brand.Description</p>
                <div class="brand-meta">
                    <span class="brand-founded">Thành lập: @brand.Founded</span>
                    <span class="brand-origin">Xuất xứ: @brand.Origin</span>
                </div>
                <div class="brand-website">
                    <a href="https://@brand.Website" target="_blank" class="website-link">
                        <i class="fas fa-external-link-alt"></i> Truy cập website chính thức
                    </a>
                </div>
            </div>
        </div>
    </div>
    
    <div class="brand-detail-content">
        <!-- Sidebar Filter -->
        <div class="brand-sidebar">
            <div class="filter-section">
                <h3 class="filter-title">Bộ lọc sản phẩm</h3>
                
                <!-- Danh mục -->
                <div class="filter-group">
                    <h4 class="filter-group-title">Danh mục</h4>
                    <div class="filter-options">
                        @foreach (var category in categories)
                        {
                            <label class="filter-option">
                                <input type="checkbox" name="category" value="@category.Id" class="filter-checkbox">
                                <span class="filter-label">@category.Name</span>
                                <span class="filter-count">(@category.Count)</span>
                            </label>
                        }
                    </div>
                </div>
                
                <!-- Khoảng giá -->
                <div class="filter-group">
                    <h4 class="filter-group-title">Khoảng giá</h4>
                    <div class="filter-options">
                        @foreach (var range in priceRanges)
                        {
                            <label class="filter-option">
                                <input type="radio" name="priceRange" value="@range.Value" class="filter-radio">
                                <span class="filter-label">@range.Label</span>
                                <span class="filter-count">(@range.Count)</span>
                            </label>
                        }
                    </div>
                </div>
                
                <!-- Đánh giá -->
                <div class="filter-group">
                    <h4 class="filter-group-title">Đánh giá</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="radio" name="rating" value="5" class="filter-radio">
                            <span class="filter-label">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                            </span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="rating" value="4" class="filter-radio">
                            <span class="filter-label">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                trở lên
                            </span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="rating" value="3" class="filter-radio">
                            <span class="filter-label">
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="fas fa-star"></i>
                                <i class="far fa-star"></i>
                                <i class="far fa-star"></i>
                                trở lên
                            </span>
                        </label>
                    </div>
                </div>
                
                <!-- Tình trạng -->
                <div class="filter-group">
                    <h4 class="filter-group-title">Tình trạng</h4>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="checkbox" name="status" value="inStock" class="filter-checkbox">
                            <span class="filter-label">Còn hàng</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" name="status" value="onSale" class="filter-checkbox">
                            <span class="filter-label">Đang giảm giá</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" name="status" value="new" class="filter-checkbox">
                            <span class="filter-label">Sản phẩm mới</span>
                        </label>
                    </div>
                </div>
                
                <button class="apply-filters-btn">Áp dụng bộ lọc</button>
                <button class="clear-filters-btn">Xóa bộ lọc</button>
            </div>
        </div>
        
        <!-- Main Content -->
        <div class="brand-main-content">
            <div class="brand-description-section">
                <h2 class="section-title">Giới thiệu về @brand.Name</h2>
                <p class="brand-full-description">@brand.FullDescription</p>
                
                <div class="brand-features">
                    <h3 class="features-title">Đặc điểm nổi bật:</h3>
                    <div class="features-grid">
                        @{
                            var features = brand.Features as List<string>;
                            var displayFeatures = features ?? new List<string>();
                        }
                        @foreach (var feature in displayFeatures)
                        {
                            <div class="feature-item">
                                <div class="feature-icon">✓</div>
                                <span>@feature</span>
                            </div>
                        }
                    </div>
                </div>
            </div>
            
            <div class="products-section">
                <div class="products-header">
                    <h2 class="section-title">Sản phẩm @brand.Name</h2>
                    <div class="products-controls">
                        <div class="sort-controls">
                            <label>Sắp xếp theo:</label>
                            <select class="sort-select">
                                <option value="popular">Phổ biến nhất</option>
                                <option value="price-asc">Giá tăng dần</option>
                                <option value="price-desc">Giá giảm dần</option>
                                <option value="name-asc">Tên A-Z</option>
                                <option value="name-desc">Tên Z-A</option>
                                <option value="newest">Mới nhất</option>
                            </select>
                        </div>
                        <div class="view-controls">
                            <button class="view-btn grid-view active" data-view="grid">
                                <i class="fas fa-th"></i>
                            </button>
                            <button class="view-btn list-view" data-view="list">
                                <i class="fas fa-list"></i>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="products-grid" id="productsGrid">
                    @if (products != null && products.Any())
                    {
                        @foreach (var product in products)
                        {
                            <div class="product-card" 
                                 data-category="@product.CategoryId" 
                                 data-price="@((product.OriginalPrice * (100 - product.DiscountPercent) / 100))" 
                                 data-rating="@product.Rating"
                                 data-status="@(product.StockQuantity > 0 ? "inStock" : ""),@(product.IsOnSale ? "onSale" : ""),@(product.IsNew ? "new" : "")">"
                                <div class="product-image-section">
                                    <a href="/Product/Detail/@product.Id">
                                        <img src="@product.Image" alt="@product.Name">
                                    </a>
                                    @if (product.IsOnSale)
                                    {
                                        <div class="sale-badge">-@product.DiscountPercent%</div>
                                    }
                                    @if (product.IsNew)
                                    {
                                        <div class="new-badge">Mới</div>
                                    }
                                </div>
                                <div class="product-info-section">
                                    <a href="/Product/Detail/@product.Id">
                                        <h3>@product.Name</h3>
                                    </a>
                                    <div class="product-rating">
                                        <div class="rating-stars">
                                            @for (int i = 1; i <= 5; i++)
                                            {
                                                <svg class="star-icon @(i <= product.Rating ? "" : "empty")" width="16" height="16" viewBox="0 0 576 512" fill="currentColor">
                                                    <path d="M259.3 17.8L194 150.2 47.9 171.5c-26.2 3.8-36.7 36.1-17.7 54.6l105.7 103-25 145.5c-4.5 26.3 23.2 46 46.4 33.7L288 439.6l130.7 68.7c23.2 12.2 50.9-7.4 46.4-33.7l-25-145.5 105.7-103c19-18.5 8.5-50.8-17.7-54.6L382 150.2 316.7 17.8c-11.7-23.6-45.6-23.9-57.4 0z"></path>
                                                </svg>
                                            }
                                        </div>
                                        <span class="rating-count">(@product.ReviewCount)</span>
                                    </div>
                                    <p class="product-price">
                                      @if (product.IsOnSale && product.DiscountPercent > 0)
                                      {
                                        <span class="sale-price">@((product.OriginalPrice * (100 - product.DiscountPercent) / 100).ToString("N0"))đ</span>
                                        <span class="original-price">@product.OriginalPrice.ToString("N0")đ</span>
                                      }
                                      else
                                      {
                                        <span>@product.OriginalPrice.ToString("N0")đ</span>
                                      }
                                    </p>
                                    <button class="add-to-cart-btn">
                                        <svg class="cart-icon" width="16" height="16" viewBox="0 0 576 512" fill="currentColor">
                                            <path d="M528.12 301.319l47.273-208C578.806 78.301 567.391 64 551.99 64H159.208l-9.166-44.81C147.758 8.021 137.93 0 126.529 0H24C10.745 0 0 10.745 0 24v16c0 13.255 10.745 24 24 24h69.883l70.248 343.435C147.325 417.1 136 435.222 136 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-15.674-6.447-29.835-16.824-40h209.647C430.447 426.165 424 440.326 424 456c0 30.928 25.072 56 56 56s56-25.072 56-56c0-22.172-12.888-41.332-31.579-50.405l5.517-24.276c3.413-15.018-8.002-29.319-23.403-29.319H218.117l-6.545-32h293.145c11.206 0 20.92-7.754 23.403-18.681z"></path>
                                        </svg>
                                        Thêm vào giỏ hàng
                                    </button>
                                </div>
                            </div>
                        }
                    }
                    else
                    {
                        <div class="no-products">
                            <i class="fas fa-box-open"></i>
                            <h3>Chưa có sản phẩm nào</h3>
                            <p>Hiện tại chưa có sản phẩm nào của thương hiệu @brand.Name</p>
                        </div>
                    }
                </div>
                
                <div class="pagination">
                    <button class="pagination-btn prev" disabled>
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <div class="pagination-numbers">
                        <span class="pagination-number active">1</span>
                        <span class="pagination-number">2</span>
                        <span class="pagination-number">3</span>
                        <span class="pagination-dots">...</span>
                        <span class="pagination-number">10</span>
                    </div>
                    <button class="pagination-btn next">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script src="~/js/brand-detail.js" asp-append-version="true"></script>
} 